# 메신저R 테스트 가이드

## 1. 메신저R 앱 설정

1. 메신저R 앱 실행
2. 스크립트 목록에서 새 스크립트 생성 또는 기존 스크립트 선택
3. `메신저r.js` 내용을 복사하여 붙여넣기
4. 스크립트 저장 및 활성화

## 2. 권한 설정

메신저R이 카카오톡 알림을 읽을 수 있도록:
1. 설정 → 접근성 → 메신저R 활성화
2. 설정 → 알림 → 알림 접근 권한 → 메신저R 허용

## 3. 테스트 명령어

허용된 방("이국환")에서 다음 명령어를 입력:

### 기본 테스트
- `/테스트` - 메신저R 연결 상태 확인
- `/서버주소` - 현재 설정된 서버 URL 확인
- `/디버그` - 서버 응답 상세 정보 확인
- `/오류확인` - 오류 발생 시 확인

### 봇 기능 테스트
- `안녕하세요` - 인사 응답 확인
- `!버전` - 봇 버전 정보
- `!명령어` - 사용 가능한 명령어 목록
- `도움말` - 도움말 확인

## 4. 문제 해결

### 응답이 없을 때:
1. `/테스트` 명령어로 메신저R 작동 확인
2. `/서버주소` 명령어로 URL 확인
3. ngrok이 실행 중인지 확인 (https://94ba270921bc.ngrok-free.app)
4. FastAPI 서버가 실행 중인지 확인

### 오류 메시지가 나올 때:
1. `/디버그` 명령어로 상세 정보 확인
2. `/오류확인` 명령어로 오류 내용 확인
3. 서버 로그 확인

## 5. 성공 확인

다음과 같은 응답이 오면 성공:
- `/테스트` → "✅ 메신저R 연결 성공!"
- `안녕하세요` → "안녕하세요! 😊 STORIUM Bot입니다. 무엇을 도와드릴까요?"
- `!버전` → 버전 정보 표시

## 6. 주의사항

1. **방 이름**: 현재 "이국환" 방만 허용됨 (main.py의 ALLOWED_ROOMS에서 수정 가능)
2. **ngrok 세션**: 무료 플랜은 2시간 제한, 재시작 시 URL 변경됨
3. **인코딩**: 메신저R은 UTF-8 인코딩 사용

## 7. 로그 확인

서버 로그에서 다음을 확인할 수 있습니다:
- 요청 수신 여부
- 처리 결과
- 오류 발생 시 상세 내용